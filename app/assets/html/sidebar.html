<div class="nav-side-menu" ng-controller="SidebarController">
    <div class="matching-bar-container">
        <!-- TODO:
        - Figure out better verbiage for matching (both frontend HTML and angular/API calls)
        - Hide divs when there's no applicable content
        - Fix other TODOs
        -->

        <!-- Temporary solution for opening requests menu
             Possible implementation: use bootstrap popover directives to open a menu to the left size
             for now, using expanding -->
        <div class="requests-heading-container" ng-click="toggleRequestsMenu()">
            <a class="requests-heading">Find gladiators</a>
            <span class="{{ expandRequestsMenu() }} click-to-expand-requests"></span>
        </div>

        <div class="requests-menu" ng-show="requestsMenuState">
            <a class="btn btn-primary request-matches">Match Me!</a>
        </div>

        <div class="sent-requests-continer">
            <p> Sent requests </p>
            <div class="sent-requests" ng-repeat="request in outboundRequests">
                <!-- TODO: Refactor this - consider a table or better verbiage -->
                <span class="request-text">{{ request.username }}: {{ request.status }}</span>
            </div>
        </div>

        <div class="received-requests-container">
            <p> Match Requests from other Gladiators </p>
            <div class="received-requests" ng-repeat="request in inboundRequests">
                <!-- TODO:
                        - Add a button that calls decline_match(userID)
                        - Add a button that calls accept_match(userID)
                -->
                <span class="request-text">{{ request.username }}</span>
            </div>
        </div>
    </div>

    <div class="menu-list">
        <ul class="menu-content">
            <li ng-repeat="gladiatorId in gladiatorIds">
                <div class="gladiator-heading-container" ng-click="toggleGladiatorPanel(gladiatorId)">
                    <a class="gladiator-heading">{{gladiatorNameById[gladiatorId]}}</a>
                    <span class="{{expandButtonClass(gladiatorId)}} click-to-expand"></span>
                </div>
                <div class="conversation-preview" ng-repeat="conversation in conversationsByUserId[gladiatorId]" ng-show="arenaStateByUserId[gladiatorId]" ng-click="conversationPreviewClicked(conversation.id)">
                    <p class="conversation-title">{{conversation.title}}</p>
                    <p class="conversation-time">{{conversation.time}}</p>
                    <p class="conversation-text">{{conversation.post_preview_text}}</p>
                    <div class="conversation-actions">
                        <a class="btn btn-primary conversation-delete">Delete</a><a class="btn btn-secondary conversation-reply">Reply</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>
